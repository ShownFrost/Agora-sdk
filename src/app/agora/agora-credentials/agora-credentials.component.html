<div class="container" *ngIf="!joined">
  <div class="text-center mb-5">
    <h1>Agora Credentials</h1>
    <small>Login to agora console to get the credentials
      <a target="_blank" href="https://console.agora.io/projects">here</a>
    </small>
  </div>
  <div class="row">
    <div class="col-4 mx-auto mt-5">
      <form autocomplete="off" [formGroup]="agoraForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="exampleInputEmail1">App Id</label>
          <input type="text" class="form-control" placeholder="Enter App Id" formControlName="appId"
            [ngClass]="{ 'is-invalid': submitted && appId?.errors }">
          <div *ngIf="submitted && appId?.errors" class="invalid-feedback">
            <div *ngIf="appId?.errors?.required">App Id is required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Channel Name</label>
          <input type="text" class="form-control" placeholder="Enter Channel Name" formControlName="channelName"
            [ngClass]="{ 'is-invalid': submitted && channelName?.errors }">
          <div *ngIf="submitted && channelName?.errors" class="invalid-feedback">
            <div *ngIf="channelName?.errors?.required">Channel Name is required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Token</label>
          <input type="text" class="form-control" placeholder="Enter Token" formControlName="token"
            [ngClass]="{ 'is-invalid': submitted && token?.errors }">
          <div *ngIf="submitted && token?.errors" class="invalid-feedback">
            <div *ngIf="token?.errors?.required">Token is required</div>
          </div>
        </div>
        <button [disabled]="agoraForm.invalid" type="submit" class="btn btn-primary w-100 mt-2">
          join
        </button>
        <button type="reset" class="btn btn-danger w-100 mt-2" (click)="onReset()">
          Reset
        </button>
      </form>
    </div>
  </div>
</div>

<app-main *ngIf="joined" [appId]="appId?.value" [channel]="channelName?.value" [token]="token?.value"
  [preAudio]="audio?.value" [preVideo]="camera?.value" (emitRedirectToCredentials)="joined = false">
</app-main>
